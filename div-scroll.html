<!DOCTYPE html>
<html>
  <head>
    <title> Async div scroll test </title>
    <meta name="viewport" content="user-scalable=no, width=device-width">
    <script>
     window.onload = function() {
       var rafEnabled = false;
       var fake = document.getElementById("fake-scroll");
       var toggle_raf_button = document.getElementById("button");
       var animationFrameId = 0;
       var scrollable = document.getElementById("scrollable");

       var updateLocation = function() {
         console.log("SCROLL");
         var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
         fake.style.webkitTransform = 'translate3d(0, ' + (-scrollTop) + 'px, 0)';
         fake.style.transform = 'translate3d(0, ' + (-scrollTop) + 'px, 0)';
       }

       toggle_raf_button.addEventListener("click", function() {
         if (rafEnabled) {
           cancelAnimationFrame(animationFrameId);
           window.addEventListener("scroll", updateLocation);
         } else {
           window.removeEventListener("scroll", updateLocation);
           animationFrameId = requestAnimationFrame(onAnimationFrame);
         }
         rafEnabled = !rafEnabled;
         toggle_raf_button.innerHTML = rafEnabled ? "Don't use RAF" : "Use RAF";
       });

       var onAnimationFrame = function() {
         updateLocation();
         animationFrameId = requestAnimationFrame(onAnimationFrame);
       }
       window.addEventListener("scroll", updateLocation);
     }
    </script>
    <style>
     * {
       margin:0;
       padding:0;
     }

     button {
       position:absolute;
       top:0px;
     }

     div {
       height:500px;
     }

     #real-scroll {
       position:relative;
       width:100%;
       background-color:red;
       margin-top:250px;
     }
     #fake-scroll {
       width:50%;
       margin-top:250px;
       position:fixed;
       top:0px;
       left:50%;
       background-color:green;
     }

     #scrollable {
       height:1000px;
       width:50%;
       overflow:scroll;
     }

     #container {
       height:2500px;
     }
    </style>
  </head>
  <body>
    <div id="scrollable">
      <div id="container">
        <div id="real-scroll"></div>
      </div>
    </div>
    <div id="fake-scroll"></div>
    <button id="button">Use RAF</button>
  </body>
</html>
